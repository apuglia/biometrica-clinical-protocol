# Red Flags (Emergencias Médicas)
# Este archivo contiene reglas de emergencia que requieren atención médica inmediata.
# Similar a rules.yaml pero con severidad "red" y puede incluir preguntas específicas para el médico.
# Estas reglas tienen prioridad máxima y deben mostrarse de forma prominente al paciente.

red_flags:
  - id: "redflag_glucose_critical"
    name: "Glucosa críticamente alta"
    enabled: true
    when:
      all:
        - biomarker: "glucose"
          operator: ">="
          value: 400
    then:
      severity: "red"
      headline: "Glucosa críticamente elevada: requiere atención inmediata"
      why: "Los niveles de glucosa superan 400 mg/dL, lo cual puede indicar una emergencia médica"
      actions:
        - "urgent_care"
        - "consult_physician"
      doctor_questions:
        - "¿Tienes síntomas de cetoacidosis o hiperglucemia hiperosmolar?"
        - "¿Estás tomando medicamentos para la diabetes?"
        - "¿Has tenido episodios previos similares?"
      tags: ["emergencia", "glucosa", "diabetes"]
  
  - id: "redflag_potassium_critical"
    name: "Potasio críticamente alto"
    enabled: true
    when:
      all:
        - biomarker: "potassium"
          operator: ">="
          value: 6.5
    then:
      severity: "red"
      headline: "Potasio críticamente elevado: riesgo cardíaco"
      why: "Los niveles de potasio superan 6.5 mEq/L, lo cual puede causar arritmias cardíacas peligrosas"
      actions:
        - "urgent_care"
        - "avoid_potassium"
        - "consult_physician"
      doctor_questions:
        - "¿Tienes síntomas como debilidad muscular o palpitaciones?"
        - "¿Tienes función renal alterada?"
        - "¿Estás tomando medicamentos que afecten el potasio?"
      tags: ["emergencia", "electrolitos", "cardíaco"]
  
  - id: "redflag_creatinine_critical"
    name: "Función renal críticamente alterada"
    enabled: true
    when:
      all:
        - biomarker: "creatinine"
          operator: ">="
          value: 3.0
    then:
      severity: "red"
      headline: "Función renal severamente alterada"
      why: "La creatinina está muy elevada, indicando posible insuficiencia renal aguda o crónica avanzada"
      actions:
        - "renal_specialist"
        - "urgent_care"
        - "monitor_bp"
      doctor_questions:
        - "¿Tienes antecedentes de enfermedad renal?"
        - "¿Has tenido cambios en la producción de orina?"
        - "¿Estás tomando medicamentos nefrotóxicos?"
      tags: ["emergencia", "renal", "función-renal"]

